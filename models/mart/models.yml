version: 2

models:
  - name: fct_ecom
    description: >
      Model ini adalah **fact table** yang menggabungkan data pesanan, pembayaran, dan produk-penjual, hanya menyimpan data pengiriman terbaru untuk setiap pasangan pesanan-produk. Model ini dirancang untuk mendukung berbagai analisis seperti kinerja penjualan, perilaku pelanggan, efisiensi pengiriman, dan kepuasan pelanggan. Dataset ini juga membantu melihat riwayat pembayaran, hubungan pesanan dengan produk dan penjual, analisis pengiriman, serta evaluasi operasional berdasarkan waktu dan volume produk. Pengujian dilakukan untuk memastikan kombinasi `order_id` dan `product_id` unik, sehingga dataset tetap konsisten dan bebas duplikasi, siap digunakan untuk analisis lebih lanjut.

    columns:
      - name: customer_id
        description: >
          ID unik yang mengidentifikasi pelanggan yang melakukan pesanan.
        tests: 
            - not_null
      - name: order_id
        description: >
          ID unik yang mengidentifikasi pesanan pelanggan.
        tests: 
            - not_null
      - name: seller_id
        description: >
          ID unik yang mengidentifikasi penjual yang menyediakan produk dalam pesanan.
        tests: 
            - not_null
      - name: product_id
        description: >
          ID unik yang mengidentifikasi produk yang termasuk dalam pesanan.
        tests:
            - not_null
      - name: payment_installments
        description: >
          Jumlah cicilan yang dipilih pelanggan untuk pembayaran.
        tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: payment_sequential
        description: >
          Nomor urut cicilan untuk pesanan tertentu.
        tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: payment_value
        description: >
          Nilai dari setiap cicilan pembayaran.
        tests: 
          - dbt_utils.accepted_range:
              min_value: 0
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: total_price
        description: >
          Total harga pesanan termasuk semua produk.
        tests: 
          - dbt_utils.accepted_range:
              min_value: 0
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: payment_percentage
        description: >
          Persentase dari total harga pesanan yang terwakili oleh cicilan tertentu.
      - name: product_weight_kg
        description: >
          Berat produk dalam kilogram.
        tests:
          - dbt_utils.not_null_proportion:
              at_least: 0.95
          - dbt_utils.accepted_range:
              min_value: 0
      - name: product_volume_cm3
        description: >
          Volume produk dalam sentimeter kubik.
        tests: 
          - dbt_utils.accepted_range:
              min_value: 0
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: shipping_limit_date
        description: >
          Batas waktu bagi kurir untuk mengirimkan pesanan.
        tests: 
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: review_score
        description: >
          Skor yang diberikan pelanggan untuk produk, mencerminkan tingkat kepuasan.
        tests: 
          - dbt_utils.accepted_range:
              min_value: 0
      - name: review_responded_hours
        description: >
          Waktu dalam jam yang dibutuhkan penjual untuk merespons ulasan pelanggan.
        tests: 
          - dbt_utils.accepted_range:
              min_value: 0
          - dbt_utils.not_null_proportion:
              at_least: 0.95
      - name: time_to_approved_minutes
        description: >
          Waktu dalam menit yang dibutuhkan untuk menyetujui pesanan setelah dilakukan.
      - name: time_carrier_delivered_hours
        description: >
          Waktu dalam jam yang dibutuhkan kurir untuk mengirimkan pesanan dari pengiriman.
      - name: time_approved_to_delivered_hours
        description: >
          Waktu dalam jam antara persetujuan pesanan dan pengiriman ke pelanggan.
      - name: approved_to_carrier_delivery_hours
        description: >
          Waktu dalam jam antara persetujuan pesanan dan pengiriman ke kurir.
      - name: different_estimated_delivered_hours
        description: >
          Perbedaan dalam jam antara waktu pengiriman yang diperkirakan dan waktu pengiriman aktual.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - order_id
            - product_id
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - fact_table


  - name: dim_customers
    description: >
      Model ini adalah **dimension table** yang dirancang untuk menyimpan informasi unik mengenai pelanggan. Data diambil dari tabel intermediate `int_dims_customers` dan dimurnikan untuk memastikan hanya kolom yang relevan yang disertakan. Model ini bertujuan untuk memberikan referensi data pelanggan yang bersih dan terstruktur, mendukung hubungan antara data pelanggan dan data faktual lainnya seperti pesanan atau pembayaran, serta menyediakan atribut pelanggan untuk analisis geografis, seperti kota dan negara bagian. Model ini digunakan untuk analisis segmentasi pelanggan, evaluasi wilayah geografis, dan pembuatan laporan, serta menyediakan informasi pelanggan berdasarkan ID unik, distribusi geografis, dan atribut lainnya dalam hubungannya dengan tabel fact.
    columns:
      - name: customer_id
        description: >
          ID unik yang mengidentifikasi pelanggan dalam tabel ini, biasanya digunakan untuk relasi ke tabel fact.
      - name: customer_unique_id
        description: >
          ID unik yang mengidentifikasi pelanggan secara global di seluruh sistem.
      - name: customer_zip_code_prefix
        description: >
          Kode pos pelanggan yang mencerminkan lokasi geografis mereka.
      - name: customer_city
        description: >
          Nama kota tempat pelanggan berada.
      - name: customer_state
        description: >
          Nama negara bagian tempat pelanggan berada.
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


  - name: dim_date
    description: >
      Model ini adalah **dimension table** yang dirancang untuk menyimpan informasi terkait tanggal dan waktu dari siklus pesanan. Data diambil dari tabel intermediate `int_dims_date_orders` dan dimurnikan untuk mencakup atribut waktu yang relevan dengan proses pesanan. Model ini bertujuan untuk menyediakan dimensi waktu yang terstruktur untuk analisis siklus hidup pesanan, mempermudah penghitungan dan analisis berbasis waktu seperti durasi pengiriman dan kepatuhan SLA (Service Level Agreement), serta mendukung integrasi dengan tabel fact lain dalam proses analisis. Model ini digunakan dalam analisis yang memerlukan informasi terkait tanggal dan waktu pembelian pesanan, persetujuan pesanan, pengiriman oleh kurir, penerimaan oleh pelanggan, serta estimasi waktu pengiriman dibandingkan dengan waktu pengiriman aktual.
    columns:
      - name: order_id
        description: >
          ID unik yang mengidentifikasi pesanan, digunakan untuk menghubungkan dimensi waktu 
          dengan tabel fact pesanan.
      - name: order_purchase_timestamp
        description: >
          Timestamp yang menunjukkan waktu pembelian pesanan oleh pelanggan.
      - name: order_approved_at
        description: >
          Timestamp yang menunjukkan waktu persetujuan pesanan setelah dilakukan.
      - name: order_delivered_carrier_date
        description: >
          Tanggal saat pesanan diterima oleh kurir untuk pengiriman.
      - name: order_delivered_customer_date
        description: >
          Tanggal saat pesanan berhasil diterima oleh pelanggan.
      - name: order_estimated_delivery_date
        description: >
          Tanggal estimasi pengiriman yang diberikan kepada pelanggan pada saat pesanan dibuat.
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


  - name: dim_orders
    description: >
      Model ini merupakan **dimension table** yang menyimpan informasi terkait atribut pesanan, seperti status pesanan dan metode pembayaran, yang diambil dari tabel intermediate `int_dims_orders`. Model ini bertujuan untuk menyediakan data atribut pesanan yang bersih dan terstruktur, mendukung pengelompokan atau segmentasi berdasarkan status pesanan atau metode pembayaran, serta memungkinkan integrasi dengan tabel fact untuk analisis lebih rinci. Model ini digunakan untuk analisis kinerja pesanan, perilaku pelanggan, dan evaluasi metode pembayaran, dengan memberikan informasi terkait status pesanan dan metode pembayaran, serta hubungan atribut pesanan dengan data faktual lainnya dalam analisis lintas fungsi.
    columns:
      - name: order_id
        description: >
          ID unik yang mengidentifikasi pesanan, digunakan untuk menghubungkan tabel dimensi ini 
          dengan tabel fact atau dimensi lainnya.
      - name: order_status
        description: >
          Status pesanan yang mencerminkan tahap penyelesaian, seperti `created`, `shipped`, atau `delivered`.
        tests:
          - accepted_values: 
              values: ['shipped', 'unavailable', 'invoiced', 'created', 'approved', 'delivered', 'canceled', 'processing']
      - name: payment_type
        description: >
          Tipe pembayaran yang digunakan pelanggan untuk pesanan, seperti `credit_card`, `boleto`, atau lainnya.
        tests:
          - accepted_values: 
              values: ['credit_card', 'boleto', 'voucher', 'not_defined', 'debit_card', 'unknown']
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


  - name: product_category_name
    description: >
      Model ini merupakan **dimension table** yang menyimpan informasi tentang nama kategori produk dalam bahasa asli dan bahasa Inggris, yang diambil dari tabel intermediate `int_dims_product_category_name`. Model ini bertujuan untuk menyediakan referensi nama kategori produk dalam dua bahasa untuk mendukung analisis multi-bahasa atau lokal, mempermudah pengelompokan produk berdasarkan kategori dalam laporan atau dashboard, dan mendukung integrasi dengan tabel fact atau tabel dimensi lainnya dalam data warehouse. Model ini digunakan untuk analisis produk berdasarkan kategori, menyediakan nama kategori produk dalam laporan atau visualisasi, serta mengintegrasikan nama kategori dengan data faktual untuk analisis lintas fungsi.
    columns:
      - name: product_category_name
        description: >
          Nama kategori produk dalam bahasa asli yang digunakan dalam sumber data.
      - name: product_category_name_english
        description: >
          Nama kategori produk dalam bahasa Inggris, digunakan untuk analisis internasional 
          atau kebutuhan pelaporan dengan standar bahasa Inggris.
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


  - name: dim_reviews
    description: >
      Model ini merupakan **dimension table** yang digunakan untuk menyimpan informasi terkait ulasan atau review pelanggan terhadap pesanan, yang diambil dari tabel intermediate `int_dims_reviews`. Model ini bertujuan untuk menyediakan data ulasan pelanggan yang terstruktur guna mendukung analisis sentimen atau kepuasan pelanggan, mempermudah penghubungan ulasan dengan data pesanan untuk analisis mendalam, dan mendukung pelaporan terkait ulasan pelanggan pada berbagai tingkat. Model ini digunakan untuk analisis data terkait isi ulasan pelanggan, identifikasi pola dalam komentar, serta penghubungan antara ulasan dan pesanan untuk menganalisis hubungan antara kualitas pengiriman, produk, atau layanan dengan tingkat kepuasan pelanggan.
    columns:
      - name: order_id
        description: >
          ID unik yang mengidentifikasi pesanan, digunakan untuk menghubungkan ulasan dengan pesanan tertentu.
      - name: review_id
        description: >
          ID unik yang mengidentifikasi ulasan pelanggan dalam tabel ini.
      - name: review_comment_title
        description: >
          Judul ulasan yang diberikan oleh pelanggan, seringkali mencerminkan ringkasan pengalaman pelanggan.
      - name: review_comment_message
        description: >
          Isi pesan ulasan yang diberikan oleh pelanggan, berisi detail pengalaman mereka 
          terkait produk atau layanan.
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


  - name: dim_sellers
    description: >
      Model ini merupakan **dimension table** yang digunakan untuk menyimpan informasi terkait penjual (sellers), yang diambil dari tabel intermediate `int_dims_sellers`. Model ini bertujuan untuk menyediakan data penjual yang bersih dan terstruktur, yang dapat digunakan dalam analisis kinerja penjual, evaluasi distribusi geografis, dan mendukung integrasi dengan data transaksi atau produk. Model ini digunakan untuk analisis kinerja penjual berdasarkan lokasi geografis, pemahaman distribusi penjual untuk kebutuhan logistik atau pemasaran, serta penghubungan informasi penjual dengan data transaksi atau produk dalam analisis lintas fungsi.
    columns:
      - name: seller_id
        description: >
          ID unik yang mengidentifikasi penjual, digunakan untuk menghubungkan data penjual 
          dengan tabel fact atau dimensi lainnya.
      - name: seller_zip_code_prefix
        description: >
          Awalan kode pos yang menunjukkan lokasi geografis penjual.
      - name: seller_city
        description: >
          Nama kota tempat penjual beroperasi atau berlokasi.
      - name: seller_state
        description: >
          Negara bagian tempat penjual beroperasi atau berlokasi.
    meta:
      owner: "bayu setyo aji  nugroho"
      created_on: "2024-11-20"
      tags: 
        - dim_table


        